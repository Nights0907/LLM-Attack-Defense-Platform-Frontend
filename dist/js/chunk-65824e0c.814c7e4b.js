(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65824e0c"],{"0745":function(e,t,a){"use strict";a("9191")},"365c":function(e,t,a){"use strict";var o=a("bc3a"),s=a.n(o);const r={log:{log(){return s.a.post("/api/logs")}},user:{login(e){return s.a.post("/api/users/login",e)},register(e){return s.a.post("/api/users/register",e)}},attack:{executeAttack(e){return s.a.post("/api/attack/execute",e)},streamAttack(e){return{url:"/api/attack/execute/stream",method:"post",data:e}},addAttackMethod(e){return s.a.post("/api/attack",e)},updateAttackMethod(e){return s.a.put("/api/attack",e)},deleteAttackMethod(e){return s.a.delete("/api/attack",{params:e})},getAllMethods(){return s.a.get("/api/attack/methods")},getHistory(e){return s.a.post("/api/history",e)},getHistoryDetail(e){return s.a.post("/api/history/details",e)}},defense:{addDefenseMethod(e){return s.a.post("/api/defense",e)},updateDefenseMethod(e){return s.a.put("/api/defense",e)},deleteDefenseMethod(e){return s.a.delete("/api/defense",{params:e})},getAllMethods(){return s.a.get("/api/defense/methods")}},model:{getAllModels(){return s.a.post("/api/models")},getModelByName(e){return s.a.post("/api/models/info",e)}}};t["a"]=r},9191:function(e,t,a){},f74b:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"manage-container"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-tabs",{attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"模型管理",name:"models"}},[t("el-card",[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("模型列表")]),t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:e.showAddModelDialog}},[e._v("添加模型")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.models}},[t("el-table-column",{attrs:{prop:"model_name",label:"模型名称",width:"240"}}),t("el-table-column",{attrs:{prop:"base_url",label:"API地址"}}),t("el-table-column",{attrs:{prop:"api_key",label:"API密钥","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.hideApiKey(a.row.api_key)))])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.editModel(a.row)}}},[e._v("编辑")]),t("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteModel(a.row)}}},[e._v("删除")])]}}])})],1)],1)],1),t("el-tab-pane",{attrs:{label:"攻击方法管理",name:"attack"}},[t("el-card",[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("攻击方法列表")]),t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:e.showAddAttackDialog}},[e._v("添加攻击方法")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.attackMethods}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),t("el-table-column",{attrs:{prop:"name",label:"攻击方法名称",width:"180"}}),t("el-table-column",{attrs:{prop:"description",label:"攻击方法描述","show-overflow-tooltip":"",width:"320"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.description||"暂无描述"))])]}}])}),t("el-table-column",{attrs:{prop:"prompt",label:"攻击提示词模板","show-overflow-tooltip":"",width:"300"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"hover"}},[t("div",{staticStyle:{"max-height":"300px","overflow-y":"auto"}},[e._v(e._s(a.row.prompt||"暂无提示词"))]),t("div",{staticClass:"prompt-preview",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.row.prompt?a.row.prompt.substring(0,50)+"...":"暂无提示词"))])])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.editAttackMethod(a.row)}}},[e._v("编辑")]),t("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteAttackMethod(a.row)}}},[e._v("删除")])]}}])})],1)],1)],1),t("el-tab-pane",{attrs:{label:"防御方法管理",name:"defense"}},[t("el-card",[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("防御方法列表")]),t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:e.showAddDefenseDialog}},[e._v("添加防御方法")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.defenseMethods}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),t("el-table-column",{attrs:{prop:"name",label:"防御方法名称",width:"180"}}),t("el-table-column",{attrs:{prop:"description",label:"防御方法描述","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.description||"暂无描述"))])]}}])}),t("el-table-column",{attrs:{prop:"prompt",label:"防御提示词模板","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"hover"}},[t("div",{staticStyle:{"max-height":"300px","overflow-y":"auto"}},[e._v(e._s(a.row.prompt||"暂无提示词"))]),t("div",{staticClass:"prompt-preview",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(a.row.prompt?a.row.prompt.substring(0,50)+"...":"暂无提示词"))])])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.editDefenseMethod(a.row)}}},[e._v("编辑")]),t("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteDefenseMethod(a.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)],1)],1),t("el-dialog",{attrs:{title:"add"===e.dialogType?"添加模型":"编辑模型",visible:e.modelDialogVisible},on:{"update:visible":function(t){e.modelDialogVisible=t}}},[t("el-form",{ref:"modelForm",attrs:{model:e.modelForm,rules:e.modelRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"模型名称",prop:"model_name"}},[t("el-input",{model:{value:e.modelForm.model_name,callback:function(t){e.$set(e.modelForm,"model_name",t)},expression:"modelForm.model_name"}})],1),t("el-form-item",{attrs:{label:"API地址",prop:"base_url"}},[t("el-input",{model:{value:e.modelForm.base_url,callback:function(t){e.$set(e.modelForm,"base_url",t)},expression:"modelForm.base_url"}})],1),t("el-form-item",{attrs:{label:"API密钥",prop:"api_key"}},[t("el-input",{attrs:{type:"password","show-password":""},model:{value:e.modelForm.api_key,callback:function(t){e.$set(e.modelForm,"api_key",t)},expression:"modelForm.api_key"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.modelDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveModel}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"add"===e.dialogType?"添加攻击方法":"编辑攻击方法",visible:e.attackDialogVisible},on:{"update:visible":function(t){e.attackDialogVisible=t}}},[t("el-form",{ref:"attackForm",attrs:{model:e.attackForm,rules:e.attackRules,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"攻击方法名称",prop:"name"}},[t("el-input",{model:{value:e.attackForm.name,callback:function(t){e.$set(e.attackForm,"name",t)},expression:"attackForm.name"}})],1),t("el-form-item",{attrs:{label:"攻击方法描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.attackForm.description,callback:function(t){e.$set(e.attackForm,"description",t)},expression:"attackForm.description"}})],1),t("el-form-item",{attrs:{label:"攻击提示词模板",prop:"prompt"}},[t("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.attackForm.prompt,callback:function(t){e.$set(e.attackForm,"prompt",t)},expression:"attackForm.prompt"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.attackDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveAttackMethod}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"add"===e.dialogType?"添加防御方法":"编辑防御方法",visible:e.defenseDialogVisible},on:{"update:visible":function(t){e.defenseDialogVisible=t}}},[t("el-form",{ref:"defenseForm",attrs:{model:e.defenseForm,rules:e.defenseRules,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"防御方法名称",prop:"name"}},[t("el-input",{model:{value:e.defenseForm.name,callback:function(t){e.$set(e.defenseForm,"name",t)},expression:"defenseForm.name"}})],1),t("el-form-item",{attrs:{label:"防御方法描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.defenseForm.description,callback:function(t){e.$set(e.defenseForm,"description",t)},expression:"defenseForm.description"}})],1),t("el-form-item",{attrs:{label:"防御提示词模板",prop:"prompt"}},[t("el-input",{attrs:{type:"textarea",rows:8},model:{value:e.defenseForm.prompt,callback:function(t){e.$set(e.defenseForm,"prompt",t)},expression:"defenseForm.prompt"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.defenseDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveDefenseMethod}},[e._v("确定")])],1)],1)],1)},s=[],r=a("365c"),l=(a("bc3a"),{name:"Manage",data(){return{activeTab:"models",models:[],attackMethods:[],defenseMethods:[],dialogType:"add",oldAttackMethodName:"",oldDefenseMethodName:"",modelDialogVisible:!1,modelForm:{model_name:"",base_url:"",api_key:""},modelRules:{model_name:[{required:!0,message:"请输入模型名称",trigger:"blur"}],base_url:[{required:!0,message:"请输入API地址",trigger:"blur"}],api_key:[{required:!0,message:"请输入API密钥",trigger:"blur"}]},attackDialogVisible:!1,attackForm:{name:"",description:"",prompt:""},attackRules:{name:[{required:!0,message:"请输入攻击方法名称",trigger:"blur"}],prompt:[{required:!0,message:"请输入攻击提示词模板",trigger:"blur"}]},defenseDialogVisible:!1,defenseForm:{name:"",description:"",prompt:""},defenseRules:{name:[{required:!0,message:"请输入方法名称",trigger:"blur"}],prompt:[{required:!0,message:"请输入防御提示词",trigger:"blur"}]}}},created(){this.fetchModels(),this.fetchAttackMethods(),this.fetchDefenseMethods()},methods:{fetchModels(){this.$store.dispatch("fetchModels").then(e=>{this.models=e}).catch(e=>{console.error("获取模型列表失败:",e),this.$message.error("获取模型列表失败")})},hideApiKey(e){return e?e.length<=8?"*".repeat(e.length):e.substring(0,4)+"*".repeat(e.length-8)+e.substring(e.length-4):""},showAddModelDialog(){this.dialogType="add",this.modelForm={model_name:"",base_url:"",api_key:""},this.modelDialogVisible=!0},editModel(e){this.dialogType="edit",this.modelForm={model_name:e.model_name,base_url:e.base_url,api_key:e.api_key},this.modelDialogVisible=!0},saveModel(){this.$refs.modelForm.validate(e=>{if(e)if(this.$message.success(("add"===this.dialogType?"添加":"更新")+"模型成功"),this.modelDialogVisible=!1,"add"===this.dialogType)this.models.push({...this.modelForm});else{const e=this.models.findIndex(e=>e.model_name===this.modelForm.model_name);-1!==e&&this.models.splice(e,1,{...this.modelForm})}})},deleteModel(e){this.$confirm(`确定要删除模型 "${e.model_name}" 吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=this.models.findIndex(t=>t.model_name===e.model_name);-1!==t&&this.models.splice(t,1),this.$message.success("删除模型成功")}).catch(()=>{})},fetchAttackMethods(){this.$store.dispatch("fetchAttackMethods").then(e=>{this.attackMethods=e}).catch(e=>{console.error("获取攻击方法失败:",e),this.$message.error("获取攻击方法列表失败")})},showAddAttackDialog(){this.dialogType="add",this.attackForm={name:"",description:"",prompt:""},this.attackDialogVisible=!0},editAttackMethod(e){this.dialogType="edit",this.oldAttackMethodName=e.name,this.attackForm={name:e.name,description:e.description||"",prompt:e.prompt||"# 此处为示例提示词模板\ndef attack(prompt):\n    # 在此实现攻击逻辑\n    return modified_prompt"},this.attackDialogVisible=!0},saveAttackMethod(){this.$refs.attackForm.validate(e=>{if(e){const e={attack_method_name:this.attackForm.name,attack_method_prompt:this.attackForm.prompt,attack_method_description:this.attackForm.description};"edit"===this.dialogType&&(e.old_attack_method_name=this.oldAttackMethodName,e.new_attack_method_name=this.attackForm.name,e.new_attack_method_prompt=this.attackForm.prompt,e.new_attack_method_description=this.attackForm.description);const t="add"===this.dialogType?r["a"].attack.addAttackMethod(e):r["a"].attack.updateAttackMethod(e);t.then(e=>{this.$message.success(("add"===this.dialogType?"添加":"更新")+"攻击方法成功"),this.attackDialogVisible=!1,this.fetchAttackMethods()}).catch(e=>{this.$message.error(("add"===this.dialogType?"添加":"更新")+"攻击方法失败: "+(e.response&&e.response.data&&e.response.data.error||"服务器错误"))})}})},deleteAttackMethod(e){this.$confirm(`确定要删除攻击方法 "${e.name}" 吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r["a"].attack.deleteAttackMethod({attack_method_name:e.name}).then(e=>{this.$message.success("删除攻击方法成功"),this.fetchAttackMethods()}).catch(e=>{this.$message.error("删除攻击方法失败: "+(e.response&&e.response.data&&e.response.data.error||"服务器错误"))})}).catch(()=>{})},fetchDefenseMethods(){this.$store.dispatch("fetchDefenseMethods").then(e=>{this.defenseMethods=e}).catch(e=>{console.error("获取防御方法失败:",e),this.$message.error("获取防御方法列表失败")})},showAddDefenseDialog(){this.dialogType="add",this.defenseForm={name:"",description:"",prompt:""},this.defenseDialogVisible=!0},editDefenseMethod(e){this.dialogType="edit",this.oldDefenseMethodName=e.name,this.defenseForm={name:e.name,description:e.description||"",prompt:e.prompt||""},this.defenseDialogVisible=!0},saveDefenseMethod(){this.$refs.defenseForm.validate(e=>{if(e){const e={defense_method_name:this.defenseForm.name,defense_method_prompt:this.defenseForm.prompt,defense_method_description:this.defenseForm.description};"edit"===this.dialogType&&(e.old_defense_method_name=this.oldDefenseMethodName,e.new_defense_method_name=this.defenseForm.name,e.new_defense_method_prompt=this.defenseForm.prompt,e.new_defense_method_description=this.defenseForm.description);const t="add"===this.dialogType?r["a"].defense.addDefenseMethod(e):r["a"].defense.updateDefenseMethod(e);t.then(e=>{this.$message.success(("add"===this.dialogType?"添加":"更新")+"防御方法成功"),this.defenseDialogVisible=!1,this.fetchDefenseMethods()}).catch(e=>{this.$message.error(("add"===this.dialogType?"添加":"更新")+"防御方法失败: "+(e.response&&e.response.data&&e.response.data.error||"服务器错误"))})}})},deleteDefenseMethod(e){this.$confirm(`确定要删除防御方法 "${e.name}" 吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r["a"].defense.deleteDefenseMethod({defense_method_name:e.name}).then(e=>{this.$message.success("删除防御方法成功"),this.fetchDefenseMethods()}).catch(e=>{this.$message.error("删除防御方法失败: "+(e.response&&e.response.data&&e.response.data.error||"服务器错误"))})}).catch(()=>{})}}}),i=l,d=(a("0745"),a("2877")),n=Object(d["a"])(i,o,s,!1,null,"259a0be3",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-65824e0c.814c7e4b.js.map